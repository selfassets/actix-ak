# AkShare Backend Service

ä¸€ä¸ªä½¿ç”¨ Actix-web æ¡†æ¶å¼€å‘çš„ç±»ä¼¼ GitHub akshare çš„åç«¯æœåŠ¡ï¼Œæä¾›è‚¡ç¥¨å’ŒæœŸè´§æ•°æ®æŸ¥è¯¢APIã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ åŸºäº Actix-web é«˜æ€§èƒ½å¼‚æ­¥æ¡†æ¶
- ğŸ“Š è‚¡ç¥¨ä¿¡æ¯æŸ¥è¯¢
- ğŸ”® æœŸè´§å®æ—¶æ•°æ®æŸ¥è¯¢ï¼ˆæ–°æµªæ•°æ®æºï¼‰
- ğŸ“ˆ å†å²æ•°æ®è·å–
- ğŸ” è‚¡ç¥¨/æœŸè´§åˆ—è¡¨æŸ¥è¯¢
- ğŸ¥ å¥åº·æ£€æŸ¥æ¥å£
- ğŸ“ ç»“æ„åŒ–APIå“åº”

## API æ¥å£

### å¥åº·æ£€æŸ¥
```
GET /api/v1/health
```

### è‚¡ç¥¨ç›¸å…³æ¥å£

#### è·å–è‚¡ç¥¨åˆ—è¡¨
```
GET /api/v1/stocks?limit=10
```

#### è·å–å•ä¸ªè‚¡ç¥¨ä¿¡æ¯
```
GET /api/v1/stocks/{symbol}
```

#### è·å–è‚¡ç¥¨å†å²æ•°æ®
```
GET /api/v1/stocks/{symbol}/history?start_date=2024-01-01&end_date=2024-01-31&limit=30
```

### æœŸè´§ç›¸å…³æ¥å£

#### è·å–æœŸè´§åˆ—è¡¨ï¼ˆä¸»åŠ›åˆçº¦ï¼‰
```
GET /api/v1/futures?exchange=DCE&limit=10
```

#### è·å–å•ä¸ªæœŸè´§åˆçº¦ä¿¡æ¯
```
GET /api/v1/futures/{symbol}
```

#### è·å–æœŸè´§å†å²æ•°æ®
```
GET /api/v1/futures/{symbol}/history?start_date=2024-01-01&end_date=2024-01-31&limit=30
```

#### è·å–æ”¯æŒçš„äº¤æ˜“æ‰€åˆ—è¡¨
```
GET /api/v1/futures/exchanges
```

#### æ‰¹é‡è·å–æœŸè´§æ•°æ®
```
POST /api/v1/futures/batch
Content-Type: application/json

["CU2405", "AL2405", "ZN2405"]
```

## æœŸè´§åˆçº¦ä»£ç è¯´æ˜

æ”¯æŒçš„äº¤æ˜“æ‰€åŠåˆçº¦æ ¼å¼ï¼š

- **å¤§è¿å•†å“äº¤æ˜“æ‰€ (DCE)**: A2405, M2405, Y2405, C2405, L2405, V2405, PP2405, J2405, JM2405, I2405
- **éƒ‘å·å•†å“äº¤æ˜“æ‰€ (CZCE)**: WH405, CF405, SR405, TA405, OI405, RM405, MA405, ZC405, FG405
- **ä¸Šæµ·æœŸè´§äº¤æ˜“æ‰€ (SHFE)**: CU2405, AL2405, ZN2405, PB2405, NI2405, AU2406, AG2406, RB2405, HC2405, RU2405
- **ä¸Šæµ·å›½é™…èƒ½æºäº¤æ˜“ä¸­å¿ƒ (INE)**: SC2405, NR2405, LU2405
- **ä¸­å›½é‡‘èæœŸè´§äº¤æ˜“æ‰€ (CFFEX)**: IF2404, IC2404, IH2404, T2406, TF2406

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
cargo build
```

### è¿è¡ŒæœåŠ¡
```bash
cargo run
```

æœåŠ¡å°†åœ¨ `http://127.0.0.1:8080` å¯åŠ¨

### æµ‹è¯•æ¥å£
```bash
# å¥åº·æ£€æŸ¥
curl http://127.0.0.1:8080/api/v1/health

# è·å–æœŸè´§åˆ—è¡¨
curl http://127.0.0.1:8080/api/v1/futures

# è·å–é“œæœŸè´§ä¸»åŠ›åˆçº¦ä¿¡æ¯
curl http://127.0.0.1:8080/api/v1/futures/CU2405

# è·å–å¤§å•†æ‰€æœŸè´§åˆ—è¡¨
curl "http://127.0.0.1:8080/api/v1/futures?exchange=DCE&limit=5"

# è·å–äº¤æ˜“æ‰€åˆ—è¡¨
curl http://127.0.0.1:8080/api/v1/futures/exchanges

# æ‰¹é‡è·å–æœŸè´§æ•°æ®
curl -X POST http://127.0.0.1:8080/api/v1/futures/batch \
  -H "Content-Type: application/json" \
  -d '["CU2405", "AL2405", "ZN2405"]'

# è·å–æœŸè´§å†å²æ•°æ®
curl "http://127.0.0.1:8080/api/v1/futures/CU2405/history?limit=10"
```

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ main.rs              # åº”ç”¨å…¥å£
â”œâ”€â”€ handlers/            # HTTPå¤„ç†å™¨
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ health.rs        # å¥åº·æ£€æŸ¥
â”‚   â”œâ”€â”€ stock.rs         # è‚¡ç¥¨ç›¸å…³æ¥å£
â”‚   â””â”€â”€ futures.rs       # æœŸè´§ç›¸å…³æ¥å£
â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ stock.rs         # è‚¡ç¥¨æ•°æ®ç»“æ„
â”‚   â”œâ”€â”€ futures.rs       # æœŸè´§æ•°æ®ç»“æ„
â”‚   â””â”€â”€ response.rs      # APIå“åº”ç»“æ„
â””â”€â”€ services/            # ä¸šåŠ¡é€»è¾‘
    â”œâ”€â”€ mod.rs
    â”œâ”€â”€ stock_service.rs # è‚¡ç¥¨æ•°æ®æœåŠ¡
    â””â”€â”€ futures_service.rs # æœŸè´§æ•°æ®æœåŠ¡
```

## æ•°æ®æºè¯´æ˜

### æœŸè´§æ•°æ®
- **å®æ—¶æ•°æ®**: æ–°æµªè´¢ç»æœŸè´§API
- **æ•°æ®æ›´æ–°**: äº¤æ˜“æ—¶é—´å†…å®æ—¶æ›´æ–°
- **æ”¯æŒåˆçº¦**: å›½å†…å››å¤§æœŸè´§äº¤æ˜“æ‰€ä¸»åŠ›åˆçº¦

### è‚¡ç¥¨æ•°æ®
- **å½“å‰ç‰ˆæœ¬**: ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
- **æ‰©å±•è®¡åˆ’**: å¯é›†æˆæ–°æµªã€è…¾è®¯ç­‰è‚¡ç¥¨API

## æ‰©å±•åŠŸèƒ½

å½“å‰ç‰ˆæœ¬çš„æ‰©å±•è®¡åˆ’ï¼š

1. **æ›´å¤šæ•°æ®æº**ï¼šé›†æˆWindã€åŒèŠ±é¡ºã€ä¸œæ–¹è´¢å¯Œç­‰æ•°æ®API
2. **æ•°æ®åº“æ”¯æŒ**ï¼šæ·»åŠ PostgreSQLæˆ–MongoDBå­˜å‚¨å†å²æ•°æ®
3. **ç¼“å­˜æœºåˆ¶**ï¼šä½¿ç”¨Redisç¼“å­˜çƒ­é—¨åˆçº¦æ•°æ®
4. **è®¤è¯æˆæƒ**ï¼šæ·»åŠ JWTè®¤è¯å’ŒAPIé™æµ
5. **WebSocket**ï¼šå®æ—¶æœŸè´§ä»·æ ¼æ¨é€
6. **ç›‘æ§æ—¥å¿—**ï¼šé›†æˆPrometheuså’Œæ—¥å¿—èšåˆ
7. **æœŸæƒæ•°æ®**ï¼šæ·»åŠ æœŸæƒåˆçº¦æ•°æ®æ”¯æŒ

## å¼€å‘ç¯å¢ƒ

- Rust 1.70+
- Cargo
- Actix-web 4.4